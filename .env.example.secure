# TaskFlow Environment Variables - Production Template
# ⚠️ SECURITY: Never commit actual .env file with real credentials!
# Copy this file to .env and replace with actual values

# Node Environment
NODE_ENV=production

# Server Configuration
PORT=3000
HOST=0.0.0.0

# Database Configuration (PostgreSQL)
# Generate strong passwords using: openssl rand -base64 32
DB_HOST=postgres
DB_PORT=5432
DB_NAME=taskflow
DB_USER=taskflow_user
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE_32_CHARS_MIN
DB_SSL=true
DB_POOL_MIN=2
DB_POOL_MAX=10

# JWT Configuration
# Generate secret: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_64_BYTE_HEX_STRING
JWT_REFRESH_SECRET=CHANGE_ME_DIFFERENT_64_BYTE_HEX_STRING
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# CORS Configuration
# In production, set to your actual frontend URLs (comma-separated)
CORS_ORIGIN=https://taskflow.yourdomain.com,https://app.taskflow.yourdomain.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5  # Stricter for auth endpoints

# Redis (optional, for session store and caching)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_TLS=true

# Security
# CSRF Secret
CSRF_SECRET=CHANGE_ME_GENERATE_RANDOM_STRING

# Encryption Key for sensitive data
ENCRYPTION_KEY=CHANGE_ME_32_BYTE_HEX_KEY

# Session secret
SESSION_SECRET=CHANGE_ME_64_BYTE_HEX_STRING

# Allowed IP addresses (optional whitelist)
# IP_WHITELIST=10.0.0.1,10.0.0.2

# Blacklisted IP addresses
# IP_BLACKLIST=

# Logging
LOG_LEVEL=info  # error, warn, info, debug
LOG_TO_FILE=true
LOG_DIRECTORY=./logs

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9323

# Email Configuration (for notifications, password reset)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=true
EMAIL_USER=noreply@taskflow.com
EMAIL_PASSWORD=CHANGE_ME_EMAIL_APP_PASSWORD
EMAIL_FROM=TaskFlow <noreply@taskflow.com>

# Application URLs
FRONTEND_URL=https://taskflow.yourdomain.com
BACKEND_URL=https://api.taskflow.yourdomain.com

# Feature Flags
ENABLE_REGISTRATION=true
ENABLE_PASSWORD_RESET=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_TWO_FACTOR_AUTH=false

# Third-party API Keys (if used)
# SENTRY_DSN=
# GOOGLE_OAUTH_CLIENT_ID=
# GOOGLE_OAUTH_CLIENT_SECRET=

# Security Headers
HSTS_MAX_AGE=31536000
CSP_REPORT_URI=/api/csp-report

# File Upload (if implementing file uploads)
MAX_FILE_SIZE=5242880  # 5MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_KEY=CHANGE_ME_BACKUP_ENCRYPTION_KEY

# Monitoring & Alerts
ALERT_EMAIL=admin@taskflow.com
SLACK_WEBHOOK_URL=

# Development Only (remove in production)
# DEBUG=*
# MOCK_AUTH=false

# ============================================
# SECURITY CHECKLIST BEFORE DEPLOYMENT:
# ============================================
# [ ] All passwords are 32+ characters and randomly generated
# [ ] JWT secrets are unique 64-byte hex strings
# [ ] Database uses SSL/TLS connections
# [ ] CORS_ORIGIN is set to actual frontend URL only
# [ ] File permissions are restrictive (chmod 600 .env)
# [ ] .env is in .gitignore (never committed)
# [ ] Secrets are stored in vault/secrets manager in production
# [ ] Regular secret rotation is scheduled
# [ ] Backup encryption is enabled
# [ ] Email credentials use app-specific passwords
# [ ] All CHANGE_ME values are replaced
# [ ] Rate limiting is properly configured
# [ ] Log level is not 'debug' in production
# ============================================
